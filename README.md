# Веб приложения для учёта оборудования

## Инструкция по развертыванию приложения

Этот документ описывает процесс развертывания Django приложения на сервере Ubuntu 24.04 с использованием Docker,
Gunicorn, Nginx, и MySQL.

## Общая информация

•   **Операционная система:** Ubuntu 24.04
•   **Веб-сервер:** Nginx
•   **Сервер приложений:** Gunicorn
•   **Контейнеризация:** Docker
•   **База данных:** MySQL
•   **SSL:** Let's Encrypt (бесплатный SSL-сертификат)

## Подготовка

1. **Установите Ubuntu 24.04:**
   • Установите Ubuntu 24.04 на ваш сервер.

2. **Получите доступ к серверу:**
   • Убедитесь, что вы можете подключаться к серверу через SSH.

3. **Подготовьте Python проект:**
   • Убедитесь, что у вас есть Django проект, готовый к развертыванию.
   • В корне вашего проекта должен быть файл `requirements.txt` с зависимостями.

4. **Подготовьте GitHub репозиторий:**
   • Убедитесь, что ваш проект хранится в репозитории на GitHub.

## Развертывание

1. **Скопируйте скрипт развертывания:**
   • Скопируйте скрипт `deploy.py` на ваш сервер, в директорию, в которой будет находиться приложение, например /opt

2. **Измените параметры скрипта `deploy.py`:**
   • Откройте файл `deploy.py` и замените следующие плейсхолдеры на ваши значения:
    * `PROJECT_NAME`: Название вашего проекта.
    * `GITHUB_REPO`: URL вашего репозитория на GitHub.
    * `DOMAIN`: Ваш домен.
    * `EMAIL`: Ваш email для Let's Encrypt.
    * `DB_NAME`: Имя базы данных MySQL.
    * `DB_USER`: Имя пользователя базы данных MySQL.
    * `DB_PASSWORD`: Пароль пользователя базы данных MySQL.

• Скрипт выполнит следующие действия:

* Обновит систему и установит необходимые зависимости.
* Клонирует ваш проект из GitHub.
* Создаст виртуальное окружение и установит зависимости.
* Создаст базу данных MySQL и настроит пользователя.
* Создаст бесплатный SSL-сертификат от Let's Encrypt.
* Создаст конфигурацию Nginx для вашего домена.
* Создаст Dockerfile и docker-compose.yml.
* Соберет Docker образ.
* Запустит Docker контейнер с вашим приложением.
* Соберет статические файлы.
* Выполнит миграцию базы данных.
* Создаст systemd сервис и запустит его.

3. **Запустите скрипт `deploy.py`:**

# Структура сайта

Данный раздел описывает структуру веб-сайта для учета оборудования в нефтесервисной компании.

## Основные разделы

* **Главная страница (/)**
    * Обзорная информация о системе.
    * Краткая сводка по количеству оборудования и бригад.
    * Навигационные ссылки на другие разделы.

* **Аутентификация (/auth/)**
    * **Вход (/auth/login/)**
        * Форма для ввода логина и пароля.

* **Бригады (/brigades/)**
    * **Список бригад (/brigades/)**
        * Отображение списка всех бригад.
        * Возможность поиска и фильтрации.
        * Кнопка "Добавить бригаду".
    * **Детали бригады (/brigades/<id>/)**
        * Информация о конкретной бригаде.
        * Список оборудования, закрепленного за бригадой.
    * **Создание/редактирование бригады (/brigades/create/, /brigades/<id>/update/)**
        * Форма для добавления новой или редактирования существующей бригады.

* **Категории оборудования (/categories/)**
    * **Список категорий (/categories/)**
        * Отображение списка всех категорий оборудования.
        * Кнопка "Добавить категорию".
    * **Создание/редактирование категории (/categories/create/, /categories/<id>/update/)**
        * Форма для добавления новой или редактирования существующей категории.

* **Оборудование (/equipment/)**
    * **Список оборудования (/equipment/)**
        * Отображение списка всего оборудования.
        * Возможность поиска, фильтрации по категории и бригаде.
    * **Детали оборудования (/equipment/id/)**
        * Информация о конкретном оборудовании.
        * Возможность загрузки/просмотра/удаления документов.
    * **Создание/редактирование оборудования (/equipment/create/, /equipment/<id>/update/)**
        * Форма для добавления нового или редактирования существующего оборудования.

* **Перемещения оборудования (/transfers/)**
    * **Форма перемещения (/transfers/create/)**
        * Форма для перемещения оборудования между бригадами.
    * **История перемещений (/transfers/history/)**
    * Список всех перемещений оборудования.

* **Пользователи (/users/)**
    * **Список пользователей (/users/)**
        * Отображение списка всех пользователей.
        * Кнопка "Добавить пользователя".
    * **Создание/редактирование пользователя (/users/create/, /users/<id>/update/)**
        * Форма для добавления нового или редактирования существующего пользователя.

* **Отчеты (/reports/)**
    * **Список отчетов (/reports/)**
    * Список доступных отчетов
    * **Общий свод (/reports/summary/)**
        * Общая информация о количестве оборудования по всему предприятию.
    * **Свод по бригадам (/reports/brigades/)**
        * Информация о количестве оборудования по каждой бригаде.
        * Возможность выгрузки отчетов (например, в CSV).

## URL-адреса панели управления (dashboard) - текстовое описание

Этот раздел описывает URL-адреса, определенные в файле `dashboard/urls.py`, в текстовом формате, поясняя назначение каждого маршрута.

-   `/`: Главная страница панели управления.
-   `/instructions`: Страница с инструкциями для пользователей.
-   `/brigades/`: Список всех бригад.
-   `/brigade/<id>/detail`: Подробная информация о бригаде с ID.
-   `/brigades/create/`: Форма для создания новой бригады.
-   `/brigades/<id>/update/`: Форма для обновления бригады с ID.
-   `/brigades/<id>/delete/`: Запрос на удаление бригады с ID.
-   `/categories/`: Список всех категорий.
-   `/categories/create/`: Форма для создания новой категории.
-   `/categories/<id>/update/`: Форма для обновления категории с ID.
-   `/categories/<id>/delete/`: Запрос на удаление категории с ID.
-   `/equipment/`: Список всего оборудования.
-   `/equipment/create/`: Форма для создания новой единицы оборудования.
-   `/equipment/<id>/create/`: Форма для создания оборудования, привязанного к бригаде с ID.
-   `/equipment/<id>/<id>/add_document/`: Страница для добавления документов к оборудованию с ID привязанному к бригаде с ID.
-   `/equipment/<id>/update/`: Форма для обновления оборудования с ID.
-   `/equipment/<id>/<id>/update_by_brigade/`: Форма для обновления оборудования с ID, привязанного к бригаде с ID.
-   `/equipment/<id>/delete/`: Запрос на удаление оборудования с ID.
-   `/equipment/<id>/`: Подробная информация об оборудовании с ID.
-   `/transfers/history/`: История перемещений оборудования.
-   `/users/`: Список всех пользователей.
-   `/users/create/`: Форма для создания нового пользователя.
-   `/users/<id>/update/`: Форма для обновления пользователя с ID.
-   `/user/<id>/update/`: Форма для обновления аккаунта пользователя с ID.
-   `/users/<id>/delete/`: Запрос на удаление пользователя с ID.
-    `/user/<id>/detail`: Детальная информация о пользователе с ID.
-   `/action-log/`: Журнал действий пользователей.
-   `/reports/`: Список доступных отчетов.
-   `/reports/summary/`: Сводный отчет.
-   `/reports/brigades/`: Отчеты по бригадам.
-   `/brigade/export/csv/`: Скачивание данных о бригадах в формате CSV.
-   `/brigade/export/excel/`: Скачивание данных о бригадах в формате Excel.
-   `/equipment/export/csv/`: Скачивание данных об оборудовании в формате CSV.
-   `/equipment/export/excel/`: Скачивание данных об оборудовании в формате Excel.


## Примечания

* 'id' в URL означает идентификатор (например, ID бригады, оборудования, пользователя).
* Структура URL может отличаться в зависимости от выбранного URL routing.
* Описанные страницы могут включать дополнительные элементы и функциональность, не описанные здесь.
