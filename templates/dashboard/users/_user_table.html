{% load custom_filters %}
{% block content %}

    <div class="container mt-4">
        <h1>–°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h1>
        <p><a href="{% url 'group_list' %}" class="btn btn-outline-dark mb-2">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≥—Ä—É–ø–ø—ã</a></p>
        <p><a href="{% url 'user_create' %}" class="btn btn-outline-success mb-2"><i class="fa fa-plus-square"></i> –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</a></p>
        <table class="table table-bordered table-striped">
            <thead class="thead-dark">
            <tr>
                <th>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</th>
                <th>–ò–º—è</th>
                <th>–§–∞–º–∏–ª–∏—è</th>
                <th>–î–æ–ª–∂–Ω–æ—Å—Ç—å</th>
                <th>–¢–µ–ª.</th>
                <th>Email</th>
                <th>–ì—Ä—É–ø–ø—ã</th>
                <th>–°—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>

            </tr>
            </thead>
            <tbody>
            {% for user in users %}
                <tr>
                    <td>{{ user.username }}</td>
                    <td>{{ user.first_name }}</td>
                    <td>{{ user.last_name }}</td>
                    <td>{% if user.profile.position %}{{ user.profile.position }}{% else %}---{% endif %}</td>
                    <td>{% if user.profile.phone_number %}{{ user.profile.phone_number }}{% else %}---{% endif %}</td>
                    <td>{{ user.email }}</td>
                    <td>
                        {% for group in user.groups.all %}
                            <span class="badge bg-info">{{ group.name }}</span>
                        {% empty %}
                            ---
                        {% endfor %}
                    </td>
                    <td>{{ user.is_superuser|yesno:"‚úÖ,üõë" }}</td>
                    <td>
                        {% if request.user|has_group:"–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä" %}
                            <a href="{% url 'user_update' user.id %}" class="btn btn-sm btn-outline-warning"><i
                                    class="fa fa-edit"></i></a>
                            <button type="button" class="btn btn-sm btn-outline-danger" data-toggle="modal"
                                    data-target="#deleteModal{{ user.id }}"><i class="fa fa-trash-can"></i></button>
                        {% else %}
                            <a class="btn btn-sm btn-outline-secondary"><i
                                    class="fa fa-edit"></i></a>
                            <a type="button" class="btn btn-sm btn-outline-secondary"><i
                                    class="fa fa-trash-can"></i></a>
                        {% endif %}
                        <div class="modal fade" id="deleteModal{{ user.id }}" tabindex="-1" role="dialog"
                             aria-labelledby="deleteModalLabel" aria-hidden="true">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="deleteModalLabel">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è</h5>
                                    </div>
                                    <div class="modal-body">
                                        –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è "{{ user.username }}"?
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">–û—Ç–º–µ–Ω–∞
                                        </button>
                                        <a href="{% url 'user_delete' user.id %}"
                                           class="btn btn-danger">–£–¥–∞–ª–∏—Ç—å</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="9">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö.</td>
                </tr>
            {% endfor %}

            </tbody>
        </table>
        <a href="{% url 'dashboard' %}" class="btn btn-secondary mb-2">–ù–∞–∑–∞–¥</a>

    </div>

{% endblock content %}