{% extends 'layouts/base.html' %}

{% block title %}
    Список категорий
{% endblock %}

{% block content %}
    <div class="container mt-4">
        <h2>Список категорий</h2>
        <div class="accordion" id="categoriesAccordion">
            {% for category in categories %}
                {% if not category.parent %}
                    <div class="card">
                        <div class="card-header" id="heading{{ category.id }}">
                            <h2 class="mb-0">
                                <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse"
                                        data-target="#collapse{{ category.id }}" aria-expanded="false"
                                        aria-controls="collapse{{ category.id }}">
                                    {{ category.name }}
                                </button>
                            </h2>
                        </div>

                        <div id="collapse{{ category.id }}" class="collapse" aria-labelledby="heading{{ category.id }}"
                             data-parent="#categoriesAccordion">
                            <div class="card-body">
                                <ul class="list-group">
                                    {% for subcategory in category.subcategories.all %}
                                        <li class="list-group-item">
                                            <a href="{% url 'equipment_list' %}">{{ subcategory.name }}</a>
                                            {% if subcategory.description %}
                                                <br>
                                                <small class="text-muted">{{ subcategory.description }}</small>
                                            {% endif %}
                                        </li>
                                    {% endfor %}
                                    {% if category.subcategories.count == 0 %}
                                        <p>Оборудование отсутствует</p>
                                    {% endif %}
                                </ul>
                                {% if category.description %}
                                    <p class="mt-2">
                                        <small class="text-muted">Описание: {{ category.description }}</small>
                                    </p>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        </div>
        <a href="{% url 'dashboard' %}" class="btn btn-sm btn-outline-dark mt-2 mb-2">НАЗАД</a>
    </div>

{% endblock content %}